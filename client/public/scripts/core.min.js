"use strict";
jQuery.fn.dsvy_is_bound = function (type) {
  if (this.data("events") !== undefined) {
    if (
      this.data("events")[type] === undefined ||
      this.data("events")[type].length === 0
    ) {
      return false;
    }
    return -1 !== $.inArray(fn, this.data("events")[type]);
  } else {
    return false;
  }
};
var dsvy_sticky_header = function () {
  if (jQuery(".dsvy-header-sticky-yes").length > 0) {
    if (jQuery("#masthead").hasClass("dsvy-header-style-2")) {
      var header_height = jQuery(
        ".dsvy-header-height-wrapper .dsvy-header-inner"
      ).height();
    }
    var offset_px = 0;
    if (jQuery("#wpadminbar").length > 0 && self === top) {
      offset_px = jQuery("#wpadminbar").height();
    }
    jQuery(".dsvy-header-menu-area.dsvy-header-sticky-yes")
      .parent()
      .css(
        "height",
        jQuery(".dsvy-header-menu-area.dsvy-header-sticky-yes").height()
      );
    jQuery(".dsvy-header-sticky-yes")
      .stick_in_parent({
        parent: "body",
        spacer: false,
        offset_top: offset_px,
        sticky_class: "dsvy-sticky-on",
      })
      .addClass("dsvy-sticky-applied");
  }
};
var dsvy_toggleSidebar = function () {
  jQuery(".dsvy-navbar > div").toggleClass("active");
  if (jQuery(".dsvy-navbar > div > .closepanel").length == 0) {
    jQuery(".dsvy-navbar > div").append(
      "<span class='closepanel'><i class='dsvy-base-icon-cancel'></i></span>"
    );
    jQuery(".dsvy-navbar > div > .closepanel").on("click", function () {
      jQuery("#menu-toggle").trigger("click");
    });
    return false;
  }
};
var dsvy_wc_cart_page_qty_update = function () {
  if (typeof jQuery.fn.observe == "function") {
    jQuery(".wp-block-woocommerce-cart").observe(
      "childlist subtree characterData",
      function (record) {
        setTimeout(function () {
          dsvy_wc_update_header_cart_total();
        }, 500);
      }
    );
    jQuery(".wc-block-components-totals-wrapper").observe(
      "childlist subtree characterData",
      function (record) {
        setTimeout(function () {
          dsvy_wc_update_header_cart_total();
        }, 500);
      }
    );
    jQuery(
      ".wc-block-components-quantity-selector__button--plus, .wc-block-components-quantity-selector__button--minus, .wc-block-cart-item__remove-link"
    ).on("click, mousedown", function () {
      setTimeout(function () {
        dsvy_wc_update_header_cart_total();
      }, 500);
    });
    jQuery(
      ".product-quantity .quantity input.input-text.qty, .wc-block-components-quantity-selector__input"
    ).on("input", function () {
      setTimeout(function () {
        dsvy_wc_update_header_cart_total();
      }, 500);
    });
  }
};
var dsvy_wc_update_header_cart_total = function () {
  var total_qty = 0;
  var total_amount = "";
  var curent_qty = 0;
  if (
    jQuery(
      "table.wc-block-cart-items.wp-block-woocommerce-cart-line-items-block > tbody > tr"
    ).length > 0
  ) {
    jQuery(
      "table.wc-block-cart-items.wp-block-woocommerce-cart-line-items-block > tbody > tr"
    ).each(function () {
      curent_qty = parseInt(
        jQuery(this)
          .find("input.wc-block-components-quantity-selector__input")
          .val()
      );
      total_qty = total_qty + curent_qty;
    });
    total_amount = jQuery(
      ".wc-block-components-totals-footer-item-tax-value"
    ).html();
  }
  jQuery(".dsvy-cart-count").html(total_qty);
  jQuery(".dsvy-cart-wrapper .woocommerce-Price-amount").html(total_amount);
};
var dsvy_preloader = function () {
  jQuery(".dsvy-preloader").fadeOut("600");
};
var dsvy_sorting = function () {
  jQuery(".dsvy-sortable-yes").each(function () {
    var boxes = jQuery(".dsvy-element-posts-wrapper", this);
    var links = jQuery(".dsvy-sortable-list a", this);
    boxes.isotope({
      animationEngine: "best-available",
      layoutMode: "masonry",
      masonry: { horizontalOrder: true },
    });
    links.on("click", function (e) {
      var selector = jQuery(this).data("sortby");
      if (selector != "*") {
        var selector = "." + selector;
      }
      boxes.isotope({
        filter: selector,
        itemSelector: ".dsvy-ele",
        layoutMode: "fitRows",
        masonry: { horizontalOrder: true },
      });
      links.removeClass("dsvy-selected");
      jQuery(this).addClass("dsvy-selected");
      e.preventDefault();
    });
  });
};
var dsvy_back_to_top = function () {
  var btn = jQuery(".scroll-to-top");
  jQuery(window).scroll(function () {
    if (jQuery(window).scrollTop() > 300) {
      btn.addClass("show");
    } else {
      btn.removeClass("show");
    }
  });
  btn.on("click", function (e) {
    e.preventDefault();
    jQuery("html, body").animate({ scrollTop: 0 }, "300");
  });
};
var dsvy_navbar = function () {
  if (!jQuery('ul#dsvy-top-menu > li > a[href="#"]').dsvy_is_bound("click")) {
    jQuery('ul#dsvy-top-menu > li > a[href="#"]').click(function () {
      return false;
    });
  }
  jQuery(".dsvy-navbar > div > ul li:has(ul)").append(
    "<span class='sub-menu-toggle'><i class='dsvy-base-icon-down-open-big'></i></span>"
  );
  jQuery(".dsvy-navbar li").hover(function () {
    if (jQuery(this).children("ul").length == 1) {
      var parent = jQuery(this);
      var child_menu = jQuery(this).children("ul");
      if (
        jQuery(parent).offset().left +
          jQuery(parent).width() +
          jQuery(child_menu).width() >
        jQuery(window).width()
      ) {
        jQuery(child_menu).addClass("dsvy-nav-left");
      } else {
        jQuery(child_menu).removeClass("dsvy-nav-left");
      }
    }
  });
  jQuery(".nav-menu-toggle").on("click tap", function () {
    dsvy_toggleSidebar();
  });
  jQuery(".sub-menu-toggle").on("click", function () {
    if (jQuery(this).siblings(".sub-menu, .children").hasClass("show")) {
      jQuery(this).siblings(".sub-menu, .children").removeClass("show");
      jQuery("i", jQuery(this))
        .removeClass("dsvy-base-icon-up-open-big")
        .addClass("dsvy-base-icon-down-open-big");
    } else {
      jQuery(this).siblings(".sub-menu, .children").addClass("show");
      jQuery("i", jQuery(this))
        .removeClass("dsvy-base-icon-down-open-big")
        .addClass("dsvy-base-icon-up-open-big");
    }
    return false;
  });
  jQuery(".dsvy-navbar ul.menu > li > a").on("click", function () {
    if (
      jQuery(this).attr("href") == "#" &&
      jQuery(this).siblings("ul.sub-menu, ul.children").length > 0
    ) {
      jQuery(this).siblings(".sub-menu-toggle").trigger("click");
      return false;
    }
  });
};
var dsvy_lightbox = function () {
  var i_type = "image";
  jQuery(
    "a.dsvy-lightbox-video, .dsvy-lightbox-video a, .dsvy-lightbox a"
  ).each(function () {
    if (
      jQuery(this).hasClass("dsvy-lightbox-video") ||
      jQuery(this).closest(".elementor-element").hasClass("dsvy-lightbox-video")
    ) {
      i_type = "iframe";
    } else {
      i_type = "image";
    }
    jQuery(this).magnificPopup({ type: i_type });
  });
};
var dsvy_video_popup = function () {
  jQuery(".dsvy-popup").on("click", function (event) {
    event.preventDefault();
    var href = jQuery(this).attr("href");
    var title = jQuery(this).attr("title");
    window.open(href, title, "width=600,height=500");
  });
};
var dsvy_testimonial = function () {
  jQuery(".dsvy-testimonial-active").each(function () {
    var ele_parent = jQuery(this).closest(".dsvy-element-posts-wrapper");
    jQuery(".designervily-ele.designervily-ele-testimonial", ele_parent).on(
      "mouseover",
      function () {
        jQuery(
          ".designervily-ele.designervily-ele-testimonial",
          ele_parent
        ).removeClass("dsvy-testimonial-active");
        jQuery(this).addClass("dsvy-testimonial-active");
      }
    );
  });
};
var dsvy_search_btn = function () {
  jQuery(function () {
    jQuery(".dsvy-header-search-btn").on("click", function (event) {
      event.preventDefault();
      jQuery(".dsvy-header-search-form-wrapper").addClass("open");
      jQuery('.dsvy-header-search-form-wrapper input[type="search"]').focus();
    });
    jQuery(".dsvy-search-close").on("click keyup", function (event) {
      jQuery(".dsvy-header-search-form-wrapper").removeClass("open");
    });
  });
};
var dsvy_gallery = function () {
  jQuery("div.dsvy-gallery").each(function () {
    jQuery(this).lightSlider({
      item: 1,
      auto: true,
      loop: true,
      controls: false,
      speed: 1500,
      pause: 5500,
    });
  });
};
var dsvy_center_logo_header_class = function () {
  if (jQuery("#masthead.dsvy-header-style-5 ul#dsvy-top-menu").length > 0) {
    var has_class = jQuery(
      "#masthead.dsvy-header-style-5 ul#dsvy-top-menu > li"
    ).hasClass("dsvy-logo-append");
    if (has_class == false) {
      var total_li = jQuery(
        "#masthead.dsvy-header-style-5 ul#dsvy-top-menu > li"
      ).length;
      var li = Math.floor(total_li / 2);
      jQuery(
        "#masthead.dsvy-header-style-5 ul#dsvy-top-menu > li:nth-child(" +
          li +
          ")"
      ).addClass("dsvy-logo-append");
    }
  }
};
var dsvy_selectwrap = function () {
  jQuery("select:not(#rating)").each(function () {
    jQuery(this).wrap("<div class='dsvy-select'></div>");
  });
};
var dsvy_circle_progressbar = function () {
  jQuery(".dsvy-circle-outer").each(function () {
    var this_circle = jQuery(this);
    var emptyFill_val = "rgba(0, 0, 0, 0)";
    var thickness_val = 10;
    var fill_val = this_circle.data("fill");
    if (
      typeof this_circle.data("emptyfill") !== "undefined" &&
      this_circle.data("emptyfill") != ""
    ) {
      emptyFill_val = this_circle.data("emptyfill");
    }
    if (
      typeof this_circle.data("thickness") !== "undefined" &&
      this_circle.data("thickness") != ""
    ) {
      thickness_val = this_circle.data("thickness");
    }
    if (
      typeof this_circle.data("filltype") !== "undefined" &&
      this_circle.data("filltype") == "gradient"
    ) {
      fill_val = {
        gradient: [
          this_circle.data("gradient1"),
          this_circle.data("gradient2"),
        ],
        gradientAngle: Math.PI / 4,
      };
    }
    if (typeof jQuery.fn.circleProgress == "function") {
      var digit = this_circle.data("digit");
      var before = this_circle.data("before");
      var after = this_circle.data("after");
      var c_width = this_circle.data("to");
      var digit = Number(digit);
      var short_digit = digit / 100;
      jQuery(".dsvy-circle", this_circle)
        .circleProgress({
          value: 0,
          size: c_width,
          startAngle: (-Math.PI / 4) * 2,
          thickness: thickness_val,
          emptyFill: emptyFill_val,
          fill: fill_val,
        })
        .on("circle-animation-progress", function (event, progress, stepValue) {
          this_circle
            .find(".dsvy-circle-number")
            .html(before + Math.round(stepValue * 100) + after);
        });
    }
    this_circle.waypoint(
      function (direction) {
        if (!this_circle.hasClass("completed")) {
          if (typeof jQuery.fn.circleProgress == "function") {
            jQuery(".dsvy-circle", this_circle).circleProgress({
              value: short_digit,
            });
          }
          this_circle.addClass("completed");
        }
      },
      { offset: "85%" }
    );
  });
};
var dsvy_carousel = function () {
  jQuery(".designervily-element-viewtype-carousel").each(function () {
    var carouselElement = jQuery(this);
    jQuery(".dsvy-ele", carouselElement)
      .removeClass(function (index, className) {
        return (className.match(/(^|\s)col-md-\S+/g) || []).join(" ");
      })
      .removeClass(function (index, className) {
        return (className.match(/(^|\s)col-lg-\S+/g) || []).join(" ");
      });
    var columns = jQuery(this).data("columns");
    var loop = jQuery(this).data("loop");
    if (columns == "1") {
      var responsive_items = ["1", "1", "1", "1", "1"];
    } else if (columns == "2") {
      var responsive_items = ["2", "2", "2", "2", "1"];
    } else if (columns == "3") {
      var responsive_items = ["3", "2", "2", "2", "1"];
    } else if (columns == "4") {
      var responsive_items = ["4", "4", "3", "2", "1"];
    } else if (columns == "5") {
      var responsive_items = ["5", "4", "3", "2", "1"];
    } else if (columns == "6") {
      var responsive_items = ["6", "4", "3", "2", "1"];
    } else {
      var responsive_items = ["3", "3", "3", "2", "1"];
    }
    var margin_val = 30;
    if (jQuery(carouselElement).data("margin") != "") {
      margin_val = jQuery(carouselElement).data("margin");
    }
    var posts_wrapper_class = ".dsvy-element-posts-wrapper";
    var val_nav = jQuery(carouselElement).data("nav");
    if (val_nav == "above") {
      val_nav = false;
    }
    var val_rtl = false;
    if (jQuery("body").hasClass("rtl")) {
      val_rtl = true;
    }
    var car_options = {
      loop: jQuery(carouselElement).data("loop"),
      autoplay: jQuery(carouselElement).data("autoplay"),
      center: jQuery(carouselElement).data("center"),
      nav: val_nav,
      rtl: val_rtl,
      dots: jQuery(carouselElement).data("dots"),
      autoplaySpeed: jQuery(carouselElement).data("autoplayspeed"),
      autoplayTimeout: jQuery(carouselElement).data("autoplayspeed") + 5000,
      navSpeed: jQuery(carouselElement).data("autoplayspeed"),
      dotsSpeed: jQuery(carouselElement).data("autoplayspeed"),
      dragEndSpeed: jQuery(carouselElement).data("autoplayspeed"),
      margin: 30,
      items: columns,
      responsiveClass: true,
      responsive: {
        1199: { items: responsive_items[0] },
        991: { items: responsive_items[1] },
        767: { items: responsive_items[2] },
        575: { items: responsive_items[3] },
        0: { items: responsive_items[4] },
      },
    };
    if (typeof margin_val == "string" && margin_val != "") {
      margin_val = margin_val.replace("px", "");
      margin_val = parseInt(margin_val);
      car_options["margin"] = margin_val;
    }
    var dsvy_owl = jQuery(posts_wrapper_class, carouselElement)
      .removeClass("row multi-columns-row")
      .addClass("owl-carousel")
      .owlCarousel(car_options);
    jQuery(".dsvy-carousel-prev", carouselElement).click(function (event) {
      event.preventDefault();
      dsvy_owl.trigger("prev.owl.carousel", [
        jQuery(carouselElement).data("autoplayspeed"),
      ]);
    });
    jQuery(".dsvy-carousel-next", carouselElement).click(function (event) {
      event.preventDefault();
      dsvy_owl.trigger("next.owl.carousel", [
        jQuery(carouselElement).data("autoplayspeed"),
      ]);
    });
  });
};
var dsvy_menu_count = function () {
  if (
    jQuery("ul#dsvy-top-menu > li").length > 0 ||
    jQuery("div#dsvy-top-menu > ul > li").length > 0
  ) {
    if (jQuery("ul#dsvy-top-menu > li").length > 0) {
      var total_li = jQuery("ul#dsvy-top-menu > li").length;
    }
    if (jQuery("div#dsvy-top-menu > ul > li").length > 0) {
      var total_li = jQuery("div#dsvy-top-menu > ul > li").length;
    }
    if (total_li > 6) {
      jQuery("#site-navigation").addClass("dsvy-bigger-menu");
    }
  }
};
var dsvy_number_rotate = function () {
  jQuery(".dsvy-number-rotate").each(function () {
    var self = jQuery(this);
    var delay = self.data("appear-animation-delay")
      ? self.data("appear-animation-delay")
      : 0;
    var animation = self.data("appear-animation");
    self.html("0");
    self.waypoint(
      function (direction) {
        if (!self.hasClass("completed")) {
          var from = self.data("from");
          var to = self.data("to");
          var interval = self.data("interval");
          self.numinate({
            format: "%counter%",
            from: from,
            to: to,
            runningInterval: 2000,
            stepUnit: interval,
            onComplete: function (elem) {
              self.addClass("completed");
            },
          });
        }
      },
      { offset: "85%" }
    );
  });
};
var dsvy_img_size_correction = function () {
  setTimeout(function () {
    jQuery("img").each(function () {
      var thisimg = jQuery(this);
      var p_width = jQuery(this).parent().width();
      var width = jQuery(this).attr("width");
      var height = jQuery(this).attr("height");
      if (
        typeof width !== typeof undefined &&
        width !== false &&
        typeof height !== typeof undefined &&
        height !== false
      ) {
        var ratio = height / width;
        jQuery(this).data("dsvy-ratio", ratio);
        var real_width = jQuery(this).width();
        var new_height = Math.round(real_width * ratio);
      }
    });
  }, 100);
};
var dsvy_tabs_element = function () {
  var tab_number = "";
  jQuery(".dsvy-tab-link").on("click", function () {
    if (!jQuery(this).hasClass("dsvy-tab-li-active")) {
      var parent = jQuery(this).closest("ul.dsvy-tabs-heading");
      jQuery("li", parent).each(function () {
        jQuery(this).removeClass("dsvy-tab-li-active");
      });
      jQuery(this).addClass("dsvy-tab-li-active");
      tab_number = jQuery(this).data("dsvy-tab");
      jQuery(this)
        .parent()
        .parent()
        .find(".dsvy-tab-content")
        .removeClass("dsvy-tab-active");
      jQuery(this)
        .parent()
        .parent()
        .find(".dsvy-tab-content-" + tab_number)
        .addClass("dsvy-tab-active");
    }
  });
  var this_title = "";
  jQuery(".dsvy-tab-content-title").on("click", function () {
    this_title = jQuery(this);
    tab_number = jQuery(this).data("dsvy-tab");
    jQuery(this)
      .closest(".dsvy-tabs")
      .find('li.dsvy-tab-link[data-dsvy-tab="' + tab_number + '"]')
      .trigger("click");
    var animateTo = jQuery(this_title).offset().top - 10;
    if (jQuery("#wpadminbar").length > 0) {
      animateTo = animateTo - jQuery("#wpadminbar").height();
    }
    jQuery("html, body").animate({ scrollTop: animateTo }, 500);
  });
};
var dsvy_validate = function () {
  jQuery("#commentform").submit(function (event) {
    var error = false;
    jQuery(".dsvy-form-error").hide();
    if (jQuery("#author").length > 0 && !jQuery("#author").val()) {
      jQuery(".comment-form-author .dsvy-form-error").show();
      error = true;
    }
    if (jQuery("#comment").length > 0 && !jQuery("#comment").val()) {
      jQuery(".comment-form-comment .dsvy-form-error").show();
      error = true;
    }
    if (jQuery("#email").length > 0) {
      if (!jQuery("#email").val()) {
        jQuery(".comment-form-email .dsvy-form-error.dsvy-empty-email").show();
        error = true;
      } else {
        var valid_email = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(
          jQuery("#email").val()
        );
        if (valid_email != true) {
          jQuery(
            ".comment-form-email .dsvy-form-error.dsvy-invalid-email"
          ).show();
          error = true;
        }
      }
    }
    if (error == true) {
      event.preventDefault();
      return false;
    } else {
      return true;
    }
  });
};
jQuery(window).resize(function () {
  setTimeout(function () {
    dsvy_sticky_header();
  }, 100);
  dsvy_img_size_correction();
});
jQuery(document).ready(function () {
  dsvy_validate();
  dsvy_tabs_element();
  dsvy_sorting();
  dsvy_back_to_top();
  dsvy_sticky_header();
  dsvy_navbar();
  dsvy_lightbox();
  dsvy_video_popup();
  dsvy_testimonial();
  dsvy_search_btn();
  dsvy_center_logo_header_class();
  dsvy_selectwrap();
  dsvy_menu_count();
  setTimeout(function () {
    dsvy_carousel();
  }, 200);
  dsvy_img_size_correction();
  dsvy_number_rotate();
});
jQuery(window).load(function () {
  dsvy_preloader();
  dsvy_sorting();
  dsvy_gallery();
  dsvy_sticky_header();
  dsvy_circle_progressbar();
  setTimeout(function () {
    dsvy_wc_cart_page_qty_update();
  }, 500);
});
